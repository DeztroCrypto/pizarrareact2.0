{"ast":null,"code":"import _slicedToArray from\"D:/GitHub/pizarrareact2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import DrawingCanvas,{subir_imagen}from\"./DrawingCanvas\";import{obtenerId}from\"./DrawingCanvas\";import Barra_Herramientas from\"./Barra_Herramientas\";import Barra_Colores from\"./Barra_Colores\";import Barra_Grosor from\"./Barra_Grosor\";import Barra_Funciones from\"./Barra_Funciones\";import\"./styles.css\";import\"./w3.css\";import Barra_Figuras from\"./Barra_Figuras\";import{useEffect}from\"react\";import Barra_CRUD from\"./Barra_CRUD\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;var crearBaseDeDatos=function crearBaseDeDatos(){if(!indexedDB){console.log(\"IndexedDB no soportado\");return;}var request=indexedDB.open(\"Pizarra-DB\",1);request.onsuccess=function(){var bd=request.result;};request.onupgradeneeded=function(){var bd=request.result;bd.createObjectStore(\"lienzosGuardados\",{keyPath:\"nombre\"});};request.onerror=function(e){console.log(\"Error\",e);console.log(\"An error occurred with IndexedDB\");};};var actuImg;function App(props){useEffect(function(){crearBaseDeDatos();leerLienzos();},[]);var socket=props.socket;var _useState=useState(\"linea\"),_useState2=_slicedToArray(_useState,2),figura=_useState2[0],setFigura=_useState2[1];var _useState3=useState(\"black\"),_useState4=_slicedToArray(_useState3,2),colorAct=_useState4[0],setColor=_useState4[1];var _useState5=useState(3),_useState6=_slicedToArray(_useState5,2),grosorAct=_useState6[0],setGrosor=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),img=_useState8[0],setImg=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),newImg=_useState10[0],setnewImg=_useState10[1];var _useState11=useState(200),_useState12=_slicedToArray(_useState11,2),newWidth=_useState12[0],setWidth=_useState12[1];var _useState13=useState(200),_useState14=_slicedToArray(_useState13,2),newHeight=_useState14[0],setHeight=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),deshabilitado=_useState16[0],setDeshabilitado=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),listaUsuarios=_useState18[0],setListaUsuarios=_useState18[1];useEffect(function(){leerLienzos();},[deshabilitado]);var cambiar_color=function cambiar_color(element){setColor(element.target.value);};var cambiar_grosor=function cambiar_grosor(element){setGrosor(element.target.value);};var cambiar_lapiz=function cambiar_lapiz(){setFigura(\"linea\");if(colorAct===\"#ffffff\"){setColor(\"black\");}document.getElementById(\"resize\").style.display=\"none\";};var cambiar_borrador=function cambiar_borrador(){setFigura(\"linea\");setColor(\"#ffffff\");document.getElementById(\"resize\").style.display=\"none\";};var dibujarCuadrado=function dibujarCuadrado(){setFigura(\"cuadrado\");if(colorAct===\"#ffffff\"){setColor(\"black\");}document.getElementById(\"resize\").style.display=\"none\";};var dibujarTriangulo=function dibujarTriangulo(){setFigura(\"triangulo\");if(colorAct===\"#ffffff\"){setColor(\"black\");}document.getElementById(\"resize\").style.display=\"none\";};var dibujarCirculo=function dibujarCirculo(){setFigura(\"circulo\");if(colorAct===\"#ffffff\"){setColor(\"black\");}document.getElementById(\"resize\").style.display=\"none\";};var guardarLienzo=function guardarLienzo(){var dbPromise=indexedDB.open(\"Pizarra-DB\",1);dbPromise.onsuccess=function(){var bd=dbPromise.result;var ingresoTexto=document.getElementById(\"ingresoNombreLienzo\");if(ingresoTexto.value){var transaction=bd.transaction([\"lienzosGuardados\"],\"readwrite\");var lienzoStore=transaction.objectStore(\"lienzosGuardados\");var canvas=document.getElementById('pizarra');var image=canvas.toDataURL();var nombre=ingresoTexto.value;var transactionRead=bd.transaction([\"lienzosGuardados\"],\"readonly\");var lienzoRead=transactionRead.objectStore(\"lienzosGuardados\");var requestRead=lienzoRead.get(nombre);requestRead.onsuccess=function(){var newtransaction=bd.transaction([\"lienzosGuardados\"],\"readwrite\");var newlienzoStore=newtransaction.objectStore(\"lienzosGuardados\");if(requestRead.result){var requestAdd=newlienzoStore.put({nombre:nombre,image:image});alert(\"Lienzo \".concat(nombre,\" actualizado\"));ingresoTexto.value=\"\";}else{var _requestAdd=newlienzoStore.add({nombre:nombre,image:image});alert(\"Lienzo guardado con el nombre \".concat(ingresoTexto.value));ingresoTexto.value=\"\";}leerLienzos();};}else{alert(\"Ingrese un nombre al lienzo porfavor\");}};};var leerLienzos=function leerLienzos(){var dbPromise=indexedDB.open(\"Pizarra-DB\",1);dbPromise.onsuccess=function(){var bd=dbPromise.result;var lienzos=document.getElementById(\"lienzos\");var transaction=bd.transaction([\"lienzosGuardados\"],\"readonly\");var lienzoStore=transaction.objectStore(\"lienzosGuardados\");var request=lienzoStore.openCursor();var fragment=document.createDocumentFragment();request.onsuccess=function(e){var cursor=e.target.result;if(cursor){var _img=document.createElement(\"img\");var nombrePizarra=document.createElement(\"label\");_img.src=cursor.value.image;_img.id=\"lienzoGuardado\";nombrePizarra.innerHTML=cursor.value.nombre;var elementoLienzo=document.createElement(\"div\");elementoLienzo.id=\"elementoLienzo\";elementoLienzo.appendChild(nombrePizarra);elementoLienzo.appendChild(_img);var divBotones=document.createElement(\"div\");divBotones.id=\"botonesLienzoGuardado\";var botonActualizar=document.createElement(\"button\");botonActualizar.textContent=\"Cargar\";botonActualizar.id=\"botonCRUD\";botonActualizar.className=\"botonCRUD\";botonActualizar.onclick=cargarLienzo;botonActualizar.id=\"botonCRUD\";botonActualizar.dataset.nombre=cursor.value.nombre;divBotones.appendChild(botonActualizar);var botonEliminar=document.createElement(\"button\");botonEliminar.textContent=\"Eliminar\";botonEliminar.id=\"botonCRUD\";botonEliminar.className=\"botonCRUD\";botonEliminar.onclick=eliminarLienzo;botonEliminar.dataset.nombre=cursor.value.nombre;divBotones.appendChild(botonEliminar);if(deshabilitado){botonActualizar.disabled=true;botonEliminar.disabled=true;}elementoLienzo.appendChild(divBotones);fragment.appendChild(elementoLienzo);cursor.continue();}else{lienzos.textContent=\"\";lienzos.appendChild(fragment);}};};};var cargarLienzo=function cargarLienzo(e){var key=e.target.dataset.nombre;var dbPromise=indexedDB.open(\"Pizarra-DB\",1);dbPromise.onsuccess=function(){var bd=dbPromise.result;var transaction=bd.transaction([\"lienzosGuardados\"],\"readonly\");var lienzoStore=transaction.objectStore(\"lienzosGuardados\");var request=lienzoStore.get(key);request.onsuccess=function(){socketCargarLienzo(request.result.image,true);document.getElementById(\"ingresoNombreLienzo\").value=request.result.nombre;cambiar_lapiz();};};};function cargarLienzoSocket(data){socketCargarLienzo(data.lienzo);}var socketCargarLienzo=function socketCargarLienzo(lienzo,emit){var canvas=document.getElementById('pizarra');var context=canvas.getContext(\"2d\");var imagen=new Image();imagen.onload=function(){context.clearRect(0,0,canvas.width,canvas.height);context.drawImage(imagen,0,0);var imgData=canvas.toDataURL();if(!emit){return;}socket.emit('cargarLienzo',{lienzo:lienzo,imgData:imgData});};imagen.src=lienzo;};var eliminarLienzo=function eliminarLienzo(e){var key=e.target.dataset.nombre;var dbPromise=indexedDB.open(\"Pizarra-DB\",1);dbPromise.onsuccess=function(){var bd=dbPromise.result;var transaction=bd.transaction([\"lienzosGuardados\"],\"readwrite\");var lienzoStore=transaction.objectStore(\"lienzosGuardados\");var request=lienzoStore.delete(key);request.onsuccess=function(){leerLienzos();alert(\"El lienzo \".concat(key,\" se eliminar\\xE1\"));};};};//////\nsocket.on('subirImagen',subirImagen);socket.on('redimensionarImagen',redimensionarImagen);socket.on('cargarLienzo',cargarLienzoSocket);socket.on('limpiarPizarra',limpiarPizarra);socket.on('envioUsuariosActuales',recargarListaUsuarios);socket.on('actualizarLista',recargarListaUsuarios);socket.on('levantarMano',levantarManoUsuario);socket.on('bajarMano',bajarManoUsuario);socket.on('brindarEdicionUsuarioHabilitado',habilitarEdicion);socket.on('pasarEdicion',pasarEdicionUsuario);/////\nfunction habilitarEdicion(data){if(data.usuarioHabilitadoDibujar===socket.id){setDeshabilitado(false);}}function recargarListaUsuarios(data){var fragment=document.createDocumentFragment();var sectorUsuarios=document.getElementById(\"sectorListaUsuarios\");sectorUsuarios.innerHTML=\"\";var listaUsuarios=data.lista;setListaUsuarios(listaUsuarios);for(var indice in listaUsuarios){var divUsuario=document.createElement(\"div\");divUsuario.className=\"usuario\";var labelUsuario=document.createElement(\"label\");labelUsuario.innerHTML=listaUsuarios[indice].nombre;if(socket.id===listaUsuarios[indice].id){labelUsuario.style.textDecoration=\"underline\";labelUsuario.style.fontWeight=\"bold\";}var botonPasarEdicion=document.createElement(\"button\");botonPasarEdicion.textContent=\"Pasar lápiz\";botonPasarEdicion.className=\"botonUsuario\";botonPasarEdicion.id=listaUsuarios[indice].id;botonPasarEdicion.onclick=pasarEdicion;botonPasarEdicion.dataset.id=listaUsuarios[indice].id;botonPasarEdicion.style.visibility=\"hidden\";divUsuario.appendChild(labelUsuario);divUsuario.appendChild(botonPasarEdicion);fragment.appendChild(divUsuario);}sectorUsuarios.appendChild(fragment);if(!data.emit){return;}socket.emit('ingresoUsuario',{lista:listaUsuarios});}var pasarEdicion=function pasarEdicion(event){var idNuevoUsuarioHabilitado=event.target.dataset.id;if(socket.id!==idNuevoUsuarioHabilitado){setDeshabilitado(true);socketPasarEdicion(idNuevoUsuarioHabilitado,true);}else{alert(\"No tienes permiso para hacer eso\");}};function pasarEdicionUsuario(data){socketPasarEdicion(data.id);}var socketPasarEdicion=function socketPasarEdicion(id,emit){if(socket.id===id){setDeshabilitado(false);}if(!emit){return;}socket.emit('pasarEdicion',{id:id});};var levantarMano=function levantarMano(){var botonLevantarMano=document.getElementById(\"botonLevantarMano\");botonLevantarMano.style.visibility=\"hidden\";var botonBajarMano=document.getElementById(\"botonBajarMano\");botonBajarMano.style.visibility=\"visible\";socketLevantarMano(socket.id,true);};function levantarManoUsuario(data){socketLevantarMano(data.id);}var socketLevantarMano=function socketLevantarMano(id,emit){var botonRespectivoUsuario=document.getElementById(id);botonRespectivoUsuario.style.visibility=\"visible\";if(!emit){return;}socket.emit('levantarMano',{id:id});};var bajarMano=function bajarMano(){var botonBajarMano=document.getElementById(\"botonBajarMano\");botonBajarMano.style.visibility=\"hidden\";var botonLevantarMano=document.getElementById(\"botonLevantarMano\");botonLevantarMano.style.visibility=\"visible\";socketBajarMano(socket.id,true);};function bajarManoUsuario(data){socketBajarMano(data.id);}var socketBajarMano=function socketBajarMano(id,emit){var botonRespectivoUsuario=document.getElementById(id);botonRespectivoUsuario.style.visibility=\"hidden\";if(!emit){return;}socket.emit('bajarMano',{id:id});};function limpiarPizarra(){socketLimpiarPizarra();}var limpiar_pizarra=function limpiar_pizarra(){socketLimpiarPizarra(true);document.getElementById(\"resize\").style.display=\"none\";};var socketLimpiarPizarra=function socketLimpiarPizarra(emit){var canvas=document.getElementById('pizarra');var context=canvas.getContext(\"2d\");context.clearRect(0,0,canvas.width,canvas.height);var imgData=canvas.toDataURL();if(!emit){return;}socket.emit('limpiarPizarra',{imgData:imgData});};var subir_imagen=function subir_imagen(){var file=document.querySelector('#inp').files[0];var canvas=document.getElementById('pizarra');var context=canvas.getContext('2d');actuImg=canvas.toDataURL();setnewImg(actuImg);setWidth(200);setHeight(200);var src=URL.createObjectURL(file);setImg(src);socketSubirImagen(src,newWidth,newHeight,true);setFigura('img');document.querySelector('#inp').addEventListener('onchange',function(e){e.currentTarget.files=null;});};var socketSubirImagen=function socketSubirImagen(src,newWidth,newHeight,emit){var canvas=document.getElementById('pizarra');var context=canvas.getContext('2d');var img=document.createElement('img');var imgData;img.id='imgSub';img.src=src;img.onload=function(){context.drawImage(img,0,0,newWidth,newHeight);document.getElementById(\"resize\").style.display=\"block\";imgData=canvas.toDataURL();if(!emit){return;}socket.emit('subirImagen',{src:src,newWidth:newWidth,newHeight:newHeight,imgData:imgData});};};function subirImagen(data){socketSubirImagen(data.src,data.newWidth,data.newHeight);}var downloadImg=function downloadImg(){var enlace=document.createElement('a');enlace.download=\"lienzo.png\";var canvas=document.getElementById('pizarra');enlace.href=canvas.toDataURL();enlace.click();};var resizeImg=function resizeImg(){var file=document.querySelector('input[type=file]').files[0];var src=URL.createObjectURL(file);var widthImg=document.getElementById('w').value;var heightImg=document.getElementById('h').value;setWidth(widthImg);setHeight(heightImg);socketResizeImg(src,widthImg,heightImg,actuImg,true);setFigura('img');};function redimensionarImagen(data){socketResizeImg(data.src,data.newWidth,data.newHeight,data.actuImg);}var socketResizeImg=function socketResizeImg(src,newWidth,newHeight,actuImg,emit){var img=new Image();var BGImg=new Image();var canvas=document.getElementById('pizarra');var context=canvas.getContext('2d');BGImg.src=actuImg;img.src=src;img.id='imgSub';var imgData;BGImg.onload=function(){context.clearRect(0,0,canvas.width,canvas.height);context.drawImage(BGImg,0,0);};img.onload=function(){context.drawImage(img,0,0,newWidth,newHeight);imgData=canvas.toDataURL();if(!emit){return;}socket.emit('redimensionarImagen',{src:src,newWidth:newWidth,newHeight:newHeight,actuImg:actuImg,imgData:imgData});};};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"principal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w3-col guardado\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Barra_CRUD,{funcionGuardarLienzo:guardarLienzo,funcionCargarLienzo:cargarLienzo,deshabilitado:deshabilitado})}),/*#__PURE__*/_jsx(\"div\",{id:\"contenedorLienzos\",children:/*#__PURE__*/_jsx(\"div\",{id:\"lienzos\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-col pizarra\",children:/*#__PURE__*/_jsx(DrawingCanvas,{color:colorAct,grosor:grosorAct,figura:figura,img:img,newImg:newImg,newWidth:newWidth,newHeight:newHeight,socket:socket,deshabilitado:deshabilitado})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w3-col tools\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w3-col\",children:/*#__PURE__*/_jsx(Barra_Herramientas,{funcionPincel:cambiar_lapiz,funcionBorrador:cambiar_borrador,deshabilitado:deshabilitado})}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-col\",children:/*#__PURE__*/_jsx(Barra_Colores,{funcionColor:cambiar_color,deshabilitado:deshabilitado})}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-col\",children:/*#__PURE__*/_jsx(Barra_Grosor,{funcionGrosor:cambiar_grosor,deshabilitado:deshabilitado})}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-col\",children:/*#__PURE__*/_jsx(Barra_Figuras,{funcionFiguraCuadrado:dibujarCuadrado,funcionFiguraTriangulo:dibujarTriangulo,funcionFiguraCirculo:dibujarCirculo,deshabilitado:deshabilitado})}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-col\",children:/*#__PURE__*/_jsx(Barra_Funciones,{funcionLimpiar:limpiar_pizarra,funcionFiguraImagen:subir_imagen,funciontamanoImagen:resizeImg,funciondescargaImagen:downloadImg,deshabilitado:deshabilitado})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"divUsuarios\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contenedorUsuarios\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Usuarios\"}),/*#__PURE__*/_jsx(\"div\",{id:\"sectorListaUsuarios\",className:\"listaUsuarios\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"botonesLevantarBajar\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"botonLevantarMano\",className:\"botonLevantar\",onClick:levantarMano,children:\"Levantar la Mano\"}),/*#__PURE__*/_jsx(\"button\",{id:\"botonBajarMano\",className:\"botonBajar\",onClick:bajarMano,children:\"Bajar la Mano\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","DrawingCanvas","subir_imagen","obtenerId","Barra_Herramientas","Barra_Colores","Barra_Grosor","Barra_Funciones","Barra_Figuras","useEffect","Barra_CRUD","indexedDB","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","crearBaseDeDatos","console","log","request","open","onsuccess","bd","result","onupgradeneeded","createObjectStore","keyPath","onerror","e","actuImg","App","props","leerLienzos","socket","figura","setFigura","colorAct","setColor","grosorAct","setGrosor","img","setImg","newImg","setnewImg","newWidth","setWidth","newHeight","setHeight","deshabilitado","setDeshabilitado","listaUsuarios","setListaUsuarios","cambiar_color","element","target","value","cambiar_grosor","cambiar_lapiz","document","getElementById","style","display","cambiar_borrador","dibujarCuadrado","dibujarTriangulo","dibujarCirculo","guardarLienzo","dbPromise","ingresoTexto","transaction","lienzoStore","objectStore","canvas","image","toDataURL","nombre","transactionRead","lienzoRead","requestRead","get","newtransaction","newlienzoStore","requestAdd","put","alert","add","lienzos","openCursor","fragment","createDocumentFragment","cursor","createElement","nombrePizarra","src","id","innerHTML","elementoLienzo","appendChild","divBotones","botonActualizar","textContent","className","onclick","cargarLienzo","dataset","botonEliminar","eliminarLienzo","disabled","continue","key","socketCargarLienzo","cargarLienzoSocket","data","lienzo","emit","context","getContext","imagen","Image","onload","clearRect","width","height","drawImage","imgData","delete","on","subirImagen","redimensionarImagen","limpiarPizarra","recargarListaUsuarios","levantarManoUsuario","bajarManoUsuario","habilitarEdicion","pasarEdicionUsuario","usuarioHabilitadoDibujar","sectorUsuarios","lista","indice","divUsuario","labelUsuario","textDecoration","fontWeight","botonPasarEdicion","pasarEdicion","visibility","event","idNuevoUsuarioHabilitado","socketPasarEdicion","levantarMano","botonLevantarMano","botonBajarMano","socketLevantarMano","botonRespectivoUsuario","bajarMano","socketBajarMano","socketLimpiarPizarra","limpiar_pizarra","file","querySelector","files","URL","createObjectURL","socketSubirImagen","addEventListener","currentTarget","downloadImg","enlace","download","href","click","resizeImg","widthImg","heightImg","socketResizeImg","BGImg"],"sources":["D:/GitHub/pizarrareact2.0/client/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport DrawingCanvas, { subir_imagen } from \"./DrawingCanvas\";\r\nimport { obtenerId } from \"./DrawingCanvas\";\r\nimport Barra_Herramientas from \"./Barra_Herramientas\";\r\nimport Barra_Colores from \"./Barra_Colores\"\r\nimport Barra_Grosor from \"./Barra_Grosor\";\r\nimport Barra_Funciones from \"./Barra_Funciones\";\r\nimport \"./styles.css\"\r\nimport \"./w3.css\"\r\nimport Barra_Figuras from \"./Barra_Figuras\";\r\nimport { useEffect } from \"react\";\r\nimport Barra_CRUD from \"./Barra_CRUD\";\r\n\r\nconst indexedDB =\r\n  window.indexedDB ||\r\n  window.mozIndexedDB ||\r\n  window.webkitIndexedDB ||\r\n  window.msIndexedDB ||\r\n  window.shimIndexedDB;\r\n\r\nconst crearBaseDeDatos = () => {\r\n  if (!indexedDB) {\r\n    console.log(\"IndexedDB no soportado\")\r\n    return\r\n  }\r\n  const request = indexedDB.open(\"Pizarra-DB\", 1)\r\n  request.onsuccess = () => {\r\n    const bd = request.result\r\n  }\r\n\r\n  request.onupgradeneeded = () => {\r\n    const bd = request.result\r\n    bd.createObjectStore(\"lienzosGuardados\", { keyPath: \"nombre\" })\r\n  }\r\n  request.onerror = (e) => {\r\n    console.log(\"Error\", e)\r\n    console.log(\"An error occurred with IndexedDB\")\r\n  }\r\n}\r\nvar actuImg\r\nfunction App(props) {\r\n  useEffect(() => {\r\n    crearBaseDeDatos()\r\n    leerLienzos()\r\n  }, [])\r\n  const socket = props.socket\r\n  const [figura, setFigura] = useState(\"linea\")\r\n  const [colorAct, setColor] = useState(\"black\")\r\n  const [grosorAct, setGrosor] = useState(3)\r\n  const [img, setImg] = useState(null)\r\n  const [newImg, setnewImg] = useState(null)\r\n  const [newWidth, setWidth] = useState(200)\r\n  const [newHeight, setHeight] = useState(200)\r\n  const [deshabilitado, setDeshabilitado] = useState(true)\r\n  const [listaUsuarios, setListaUsuarios] = useState(null)\r\n  useEffect(() => {\r\n    leerLienzos()\r\n  }, [deshabilitado])\r\n  const cambiar_color = (element) => {\r\n    setColor(element.target.value)\r\n  }\r\n\r\n  const cambiar_grosor = (element) => {\r\n    setGrosor(element.target.value)\r\n  }\r\n\r\n  const cambiar_lapiz = () => {\r\n    setFigura(\"linea\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const cambiar_borrador = () => {\r\n    setFigura(\"linea\")\r\n    setColor(\"#ffffff\")\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const dibujarCuadrado = () => {\r\n    setFigura(\"cuadrado\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n\r\n  const dibujarTriangulo = () => {\r\n    setFigura(\"triangulo\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n\r\n  const dibujarCirculo = () => {\r\n    setFigura(\"circulo\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const guardarLienzo = () => {\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      let ingresoTexto = document.getElementById(\"ingresoNombreLienzo\")\r\n      if (ingresoTexto.value) {\r\n        const transaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\")\r\n        const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n        const canvas = document.getElementById('pizarra')\r\n        var image = canvas.toDataURL();\r\n        var nombre = ingresoTexto.value\r\n\r\n        const transactionRead = bd.transaction([\"lienzosGuardados\"], \"readonly\")\r\n        const lienzoRead = transactionRead.objectStore(\"lienzosGuardados\")\r\n        const requestRead = lienzoRead.get(nombre)\r\n        requestRead.onsuccess = () => {\r\n          const newtransaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\")\r\n          const newlienzoStore = newtransaction.objectStore(\"lienzosGuardados\")\r\n          if (requestRead.result) {\r\n            const requestAdd = newlienzoStore.put({\r\n              nombre,\r\n              image\r\n            })\r\n            alert(`Lienzo ${nombre} actualizado`)\r\n            ingresoTexto.value = \"\"\r\n          } else {\r\n            const requestAdd = newlienzoStore.add({\r\n              nombre,\r\n              image\r\n            })\r\n            alert(`Lienzo guardado con el nombre ${ingresoTexto.value}`)\r\n            ingresoTexto.value = \"\"\r\n          }\r\n          leerLienzos()\r\n        }\r\n\r\n      } else {\r\n        alert(\"Ingrese un nombre al lienzo porfavor\")\r\n      }\r\n    }\r\n  }\r\n\r\n  const leerLienzos = () => {\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      const lienzos = document.getElementById(\"lienzos\")\r\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readonly\")\r\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n      const request = lienzoStore.openCursor()\r\n      const fragment = document.createDocumentFragment()\r\n\r\n      request.onsuccess = (e) => {\r\n        const cursor = e.target.result\r\n        if (cursor) {\r\n          const img = document.createElement(\"img\")\r\n          const nombrePizarra = document.createElement(\"label\")\r\n          img.src = cursor.value.image\r\n          img.id = \"lienzoGuardado\"\r\n          nombrePizarra.innerHTML = cursor.value.nombre\r\n          const elementoLienzo = document.createElement(\"div\")\r\n          elementoLienzo.id = \"elementoLienzo\"\r\n          elementoLienzo.appendChild(nombrePizarra)\r\n          elementoLienzo.appendChild(img)\r\n          const divBotones = document.createElement(\"div\")\r\n          divBotones.id = \"botonesLienzoGuardado\"\r\n          const botonActualizar = document.createElement(\"button\")\r\n          botonActualizar.textContent = \"Cargar\"\r\n          botonActualizar.id = \"botonCRUD\"\r\n          botonActualizar.className = \"botonCRUD\"\r\n          botonActualizar.onclick = cargarLienzo\r\n          botonActualizar.id = \"botonCRUD\"\r\n          botonActualizar.dataset.nombre = cursor.value.nombre\r\n          divBotones.appendChild(botonActualizar)\r\n          const botonEliminar = document.createElement(\"button\")\r\n          botonEliminar.textContent = \"Eliminar\"\r\n          botonEliminar.id = \"botonCRUD\"\r\n          botonEliminar.className = \"botonCRUD\"\r\n          botonEliminar.onclick = eliminarLienzo\r\n          botonEliminar.dataset.nombre = cursor.value.nombre\r\n          divBotones.appendChild(botonEliminar)\r\n          if (deshabilitado) {\r\n            botonActualizar.disabled = true\r\n            botonEliminar.disabled = true\r\n          }\r\n          elementoLienzo.appendChild(divBotones)\r\n          fragment.appendChild(elementoLienzo)\r\n          cursor.continue()\r\n        } else {\r\n          lienzos.textContent = \"\"\r\n          lienzos.appendChild(fragment)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const cargarLienzo = (e) => {\r\n    const key = e.target.dataset.nombre\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readonly\")\r\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n      const request = lienzoStore.get(key)\r\n      request.onsuccess = () => {\r\n        socketCargarLienzo(request.result.image,true)\r\n        document.getElementById(\"ingresoNombreLienzo\").value = request.result.nombre\r\n        cambiar_lapiz()\r\n      }\r\n    }\r\n  }\r\n\r\n  function cargarLienzoSocket(data){\r\n      socketCargarLienzo(data.lienzo)\r\n  }\r\n\r\n  const socketCargarLienzo = (lienzo,emit) => {\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext(\"2d\")\r\n    const imagen = new Image\r\n    imagen.onload = () => {\r\n      context.clearRect(0, 0, canvas.width, canvas.height);\r\n      context.drawImage(imagen, 0, 0)\r\n      const imgData = canvas.toDataURL()\r\n      if(!emit){\r\n        return\r\n      }\r\n      socket.emit('cargarLienzo',{\r\n        lienzo,\r\n        imgData\r\n      })\r\n    }\r\n    imagen.src = lienzo\r\n  }\r\n\r\n  const eliminarLienzo = (e) => {\r\n    const key = e.target.dataset.nombre\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\")\r\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n      const request = lienzoStore.delete(key)\r\n      request.onsuccess = () => {\r\n        leerLienzos()\r\n        alert(`El lienzo ${key} se eliminará`)\r\n      }\r\n    }\r\n  }\r\n\r\n  //////\r\n  socket.on('subirImagen', subirImagen)\r\n  socket.on('redimensionarImagen', redimensionarImagen)\r\n  socket.on('cargarLienzo',cargarLienzoSocket)\r\n  socket.on('limpiarPizarra', limpiarPizarra)\r\n  socket.on('envioUsuariosActuales', recargarListaUsuarios)\r\n  socket.on('actualizarLista', recargarListaUsuarios)\r\n  socket.on('levantarMano', levantarManoUsuario)\r\n  socket.on('bajarMano', bajarManoUsuario)\r\n  socket.on('brindarEdicionUsuarioHabilitado', habilitarEdicion)\r\n  socket.on('pasarEdicion', pasarEdicionUsuario)\r\n  /////\r\n\r\n  function habilitarEdicion(data) {\r\n    if (data.usuarioHabilitadoDibujar === socket.id) {\r\n      setDeshabilitado(false)\r\n    }\r\n  }\r\n\r\n  function recargarListaUsuarios(data) {\r\n    const fragment = document.createDocumentFragment()\r\n    const sectorUsuarios = document.getElementById(\"sectorListaUsuarios\")\r\n    sectorUsuarios.innerHTML = \"\"\r\n    let listaUsuarios = data.lista\r\n    setListaUsuarios(listaUsuarios)\r\n    for (let indice in listaUsuarios) {\r\n      const divUsuario = document.createElement(\"div\")\r\n      divUsuario.className = \"usuario\"\r\n      const labelUsuario = document.createElement(\"label\")\r\n      labelUsuario.innerHTML = listaUsuarios[indice].nombre\r\n      if(socket.id === listaUsuarios[indice].id){\r\n        labelUsuario.style.textDecoration = \"underline\"\r\n        labelUsuario.style.fontWeight = \"bold\"\r\n      }\r\n      const botonPasarEdicion = document.createElement(\"button\")\r\n      botonPasarEdicion.textContent = \"Pasar lápiz\"\r\n      botonPasarEdicion.className = \"botonUsuario\"\r\n      botonPasarEdicion.id = listaUsuarios[indice].id\r\n      botonPasarEdicion.onclick = pasarEdicion\r\n      botonPasarEdicion.dataset.id = listaUsuarios[indice].id\r\n      botonPasarEdicion.style.visibility = \"hidden\"\r\n\r\n      divUsuario.appendChild(labelUsuario)\r\n      divUsuario.appendChild(botonPasarEdicion)\r\n      fragment.appendChild(divUsuario)\r\n    }\r\n    sectorUsuarios.appendChild(fragment)\r\n    if (!data.emit) {\r\n      return\r\n    }\r\n    socket.emit('ingresoUsuario', { lista: listaUsuarios })\r\n  }\r\n\r\n  const pasarEdicion = (event) => {\r\n    const idNuevoUsuarioHabilitado = event.target.dataset.id\r\n    if (socket.id !== idNuevoUsuarioHabilitado) {\r\n      setDeshabilitado(true)\r\n      socketPasarEdicion(idNuevoUsuarioHabilitado, true)\r\n    }else{\r\n      alert(\"No tienes permiso para hacer eso\")\r\n    }\r\n  }\r\n\r\n  function pasarEdicionUsuario(data) {\r\n    socketPasarEdicion(data.id)\r\n  }\r\n\r\n  const socketPasarEdicion = (id, emit) => {\r\n    if (socket.id === id) {\r\n      setDeshabilitado(false)\r\n    }\r\n    if (!emit) {\r\n      return\r\n    }\r\n    socket.emit('pasarEdicion', {\r\n      id\r\n    })\r\n  }\r\n\r\n  const levantarMano = () => {\r\n    const botonLevantarMano = document.getElementById(\"botonLevantarMano\")\r\n    botonLevantarMano.style.visibility = \"hidden\"\r\n    const botonBajarMano = document.getElementById(\"botonBajarMano\")\r\n    botonBajarMano.style.visibility = \"visible\"\r\n    socketLevantarMano(socket.id, true)\r\n  }\r\n\r\n  function levantarManoUsuario(data) {\r\n    socketLevantarMano(data.id)\r\n  }\r\n\r\n  const socketLevantarMano = (id, emit) => {\r\n    const botonRespectivoUsuario = document.getElementById(id)\r\n    botonRespectivoUsuario.style.visibility = \"visible\"\r\n    if (!emit) {\r\n      return\r\n    }\r\n    socket.emit('levantarMano', {\r\n      id\r\n    })\r\n  }\r\n\r\n  const bajarMano = () => {\r\n    const botonBajarMano = document.getElementById(\"botonBajarMano\")\r\n    botonBajarMano.style.visibility = \"hidden\"\r\n    const botonLevantarMano = document.getElementById(\"botonLevantarMano\")\r\n    botonLevantarMano.style.visibility = \"visible\"\r\n    socketBajarMano(socket.id, true)\r\n  }\r\n\r\n  function bajarManoUsuario(data) {\r\n    socketBajarMano(data.id)\r\n  }\r\n\r\n  const socketBajarMano = (id, emit) => {\r\n    const botonRespectivoUsuario = document.getElementById(id)\r\n    botonRespectivoUsuario.style.visibility = \"hidden\"\r\n    if (!emit) {\r\n      return\r\n    }\r\n    socket.emit('bajarMano', {\r\n      id\r\n    })\r\n  }\r\n\r\n  function limpiarPizarra() {\r\n    socketLimpiarPizarra()\r\n  }\r\n\r\n  const limpiar_pizarra = () => {\r\n    socketLimpiarPizarra(true)\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const socketLimpiarPizarra = (emit) => {\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext(\"2d\");\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    let imgData = canvas.toDataURL()\r\n    if (!emit) {\r\n      return\r\n    }\r\n    socket.emit('limpiarPizarra', {\r\n      imgData\r\n    })\r\n  }\r\n\r\n  const subir_imagen = () => {\r\n    const file = document.querySelector('#inp').files[0]\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext('2d')\r\n    actuImg = canvas.toDataURL()\r\n    setnewImg(actuImg)\r\n\r\n    setWidth(200)\r\n    setHeight(200)\r\n    const src = URL.createObjectURL(file)\r\n    setImg(src)\r\n    socketSubirImagen(src, newWidth, newHeight, true)\r\n    setFigura('img')\r\n    document.querySelector('#inp').addEventListener('onchange', function (e) {\r\n      e.currentTarget.files = null;\r\n    })\r\n  }\r\n\r\n  const socketSubirImagen = (src, newWidth, newHeight, emit) => {\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext('2d')\r\n    let img = document.createElement('img')\r\n    var imgData\r\n    img.id = 'imgSub'\r\n    img.src = src\r\n    img.onload = () => {\r\n      context.drawImage(img, 0, 0, newWidth, newHeight)\r\n      document.getElementById(\"resize\").style.display = \"block\";\r\n      imgData = canvas.toDataURL()\r\n      if (!emit) {\r\n        return\r\n      }\r\n      socket.emit('subirImagen', {\r\n        src,\r\n        newWidth,\r\n        newHeight,\r\n        imgData\r\n      })\r\n    }\r\n  }\r\n  function subirImagen(data) {\r\n    socketSubirImagen(data.src, data.newWidth, data.newHeight)\r\n  }\r\n\r\n  const downloadImg = () => {\r\n    let enlace = document.createElement('a')\r\n    enlace.download = \"lienzo.png\"\r\n    const canvas = document.getElementById('pizarra')\r\n\r\n    enlace.href = canvas.toDataURL();\r\n    enlace.click();\r\n  }\r\n\r\n\r\n  const resizeImg = () => {\r\n    const file = document.querySelector('input[type=file]').files[0]\r\n    const src = URL.createObjectURL(file)\r\n    const widthImg = document.getElementById('w').value\r\n    const heightImg = document.getElementById('h').value\r\n    setWidth(widthImg)\r\n    setHeight(heightImg)\r\n    socketResizeImg(src, widthImg, heightImg, actuImg, true)\r\n    setFigura('img')\r\n  }\r\n\r\n  function redimensionarImagen(data) {\r\n    socketResizeImg(data.src, data.newWidth, data.newHeight, data.actuImg)\r\n  }\r\n\r\n  const socketResizeImg = (src, newWidth, newHeight, actuImg, emit) => {\r\n    let img = new Image\r\n    let BGImg = new Image\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext('2d')\r\n    BGImg.src = actuImg\r\n    img.src = src\r\n    img.id = 'imgSub'\r\n    var imgData\r\n    BGImg.onload = () => {\r\n      context.clearRect(0, 0, canvas.width, canvas.height)\r\n      context.drawImage(BGImg, 0, 0)\r\n    }\r\n    img.onload = () => {\r\n      context.drawImage(img, 0, 0, newWidth, newHeight)\r\n      imgData = canvas.toDataURL()\r\n      if (!emit) {\r\n        return\r\n      }\r\n      socket.emit('redimensionarImagen', {\r\n        src,\r\n        newWidth,\r\n        newHeight,\r\n        actuImg,\r\n        imgData\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return <>\r\n    <div className=\"principal\">\r\n      <div className=\"w3-col guardado\">\r\n        <div>\r\n          <Barra_CRUD funcionGuardarLienzo={guardarLienzo} funcionCargarLienzo={cargarLienzo} deshabilitado={deshabilitado} />\r\n        </div>\r\n        <div id=\"contenedorLienzos\">\r\n          <div id=\"lienzos\"></div>\r\n        </div>\r\n      </div>\r\n      <div className=\"w3-col pizarra\">\r\n        <DrawingCanvas\r\n          color={colorAct}\r\n          grosor={grosorAct}\r\n          figura={figura}\r\n          img={img}\r\n          newImg={newImg}\r\n          newWidth={newWidth}\r\n          newHeight={newHeight}\r\n          socket={socket}\r\n          deshabilitado={deshabilitado}\r\n        ></DrawingCanvas>\r\n      </div>\r\n      <div className=\"w3-col tools\">\r\n        <div className=\"w3-col\">\r\n          <Barra_Herramientas funcionPincel={cambiar_lapiz} funcionBorrador={cambiar_borrador} deshabilitado={deshabilitado} />\r\n        </div>\r\n        <div className=\"w3-col\">\r\n          <Barra_Colores funcionColor={cambiar_color} deshabilitado={deshabilitado} />\r\n        </div>\r\n        <div className=\"w3-col\">\r\n          <Barra_Grosor funcionGrosor={cambiar_grosor} deshabilitado={deshabilitado} />\r\n        </div>\r\n        <div className=\"w3-col\">\r\n          <Barra_Figuras funcionFiguraCuadrado={dibujarCuadrado} funcionFiguraTriangulo={dibujarTriangulo} funcionFiguraCirculo={dibujarCirculo} deshabilitado={deshabilitado} />\r\n        </div>\r\n        <div className=\"w3-col\">\r\n          <Barra_Funciones funcionLimpiar={limpiar_pizarra} funcionFiguraImagen={subir_imagen} funciontamanoImagen={resizeImg} funciondescargaImagen={downloadImg} deshabilitado={deshabilitado} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className=\"divUsuarios\">\r\n      <div className=\"contenedorUsuarios\">\r\n        <h1>Usuarios</h1>\r\n        <div id=\"sectorListaUsuarios\" className=\"listaUsuarios\"></div>\r\n      </div>\r\n      <div className=\"botonesLevantarBajar\">\r\n        <button id=\"botonLevantarMano\" className=\"botonLevantar\" onClick={levantarMano}>Levantar la Mano</button>\r\n        <button id=\"botonBajarMano\" className=\"botonBajar\" onClick={bajarMano} >Bajar la Mano</button>\r\n      </div>\r\n    </div>\r\n  </>\r\n\r\n\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}