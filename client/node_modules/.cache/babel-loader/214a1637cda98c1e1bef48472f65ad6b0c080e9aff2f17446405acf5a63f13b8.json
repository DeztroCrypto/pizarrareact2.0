{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\pizarrareact2.0\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport DrawingCanvas, { subir_imagen } from \"./DrawingCanvas\";\nimport { obtenerId } from \"./DrawingCanvas\";\nimport Barra_Herramientas from \"./Barra_Herramientas\";\nimport Barra_Colores from \"./Barra_Colores\";\nimport Barra_Grosor from \"./Barra_Grosor\";\nimport Barra_Funciones from \"./Barra_Funciones\";\nimport \"./styles.css\";\nimport \"./w3.css\";\nimport Barra_Figuras from \"./Barra_Figuras\";\nimport { useEffect } from \"react\";\nimport Barra_CRUD from \"./Barra_CRUD\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;\nconst crearBaseDeDatos = () => {\n  if (!indexedDB) {\n    console.log(\"IndexedDB no soportado\");\n    return;\n  }\n  const request = indexedDB.open(\"Pizarra-DB\", 1);\n  request.onsuccess = () => {\n    const bd = request.result;\n  };\n  request.onupgradeneeded = () => {\n    const bd = request.result;\n    bd.createObjectStore(\"lienzosGuardados\", {\n      keyPath: \"nombre\"\n    });\n  };\n  request.onerror = e => {\n    console.log(\"Error\", e);\n    console.log(\"An error occurred with IndexedDB\");\n  };\n};\nfunction App(props) {\n  _s();\n  useEffect(() => {\n    crearBaseDeDatos();\n    leerLienzos();\n  }, []);\n  const socket = props.socket;\n  const [figura, setFigura] = useState(\"linea\");\n  const [colorAct, setColor] = useState(\"black\");\n  const [grosorAct, setGrosor] = useState(3);\n  const [img, setImg] = useState(null);\n  const [newImg, setnewImg] = useState(null);\n  const [newWidth, setWidth] = useState(200);\n  const [newHeight, setHeight] = useState(200);\n  let idImg;\n  let canvas;\n  let context;\n  const cambiar_color = element => {\n    setColor(element.target.value);\n  };\n  const cambiar_grosor = element => {\n    setGrosor(element.target.value);\n  };\n  const cambiar_lapiz = () => {\n    setFigura(\"linea\");\n    if (colorAct === \"#ffffff\") {\n      setColor(\"black\");\n    }\n    document.getElementById(\"resize\").style.display = \"none\";\n  };\n  const cambiar_borrador = () => {\n    setFigura(\"linea\");\n    setColor(\"#ffffff\");\n    document.getElementById(\"resize\").style.display = \"none\";\n  };\n  const dibujarCuadrado = () => {\n    setFigura(\"cuadrado\");\n    if (colorAct === \"#ffffff\") {\n      setColor(\"black\");\n    }\n    document.getElementById(\"resize\").style.display = \"none\";\n  };\n  const dibujarTriangulo = () => {\n    setFigura(\"triangulo\");\n    if (colorAct === \"#ffffff\") {\n      setColor(\"black\");\n    }\n    document.getElementById(\"resize\").style.display = \"none\";\n  };\n  const dibujarCirculo = () => {\n    setFigura(\"circulo\");\n    if (colorAct === \"#ffffff\") {\n      setColor(\"black\");\n    }\n    document.getElementById(\"resize\").style.display = \"none\";\n  };\n  const guardarLienzo = () => {\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1);\n    dbPromise.onsuccess = () => {\n      const bd = dbPromise.result;\n      let ingresoTexto = document.getElementById(\"ingresoNombreLienzo\");\n      if (ingresoTexto.value) {\n        const transaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\");\n        const lienzoStore = transaction.objectStore(\"lienzosGuardados\");\n        const canvas = document.getElementById('pizarra');\n        var image = canvas.toDataURL();\n        var nombre = ingresoTexto.value;\n        const transactionRead = bd.transaction([\"lienzosGuardados\"], \"readonly\");\n        const lienzoRead = transactionRead.objectStore(\"lienzosGuardados\");\n        const requestRead = lienzoRead.get(nombre);\n        requestRead.onsuccess = () => {\n          const newtransaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\");\n          const newlienzoStore = newtransaction.objectStore(\"lienzosGuardados\");\n          if (requestRead.result) {\n            const requestAdd = newlienzoStore.put({\n              nombre,\n              image\n            });\n            alert(`Lienzo ${nombre} actualizado`);\n            ingresoTexto.value = \"\";\n          } else {\n            const requestAdd = newlienzoStore.add({\n              nombre,\n              image\n            });\n            alert(`Lienzo guardado con el nombre ${ingresoTexto.value}`);\n            ingresoTexto.value = \"\";\n          }\n          leerLienzos();\n        };\n      } else {\n        alert(\"Ingrese un nombre al lienzo porfavor\");\n      }\n    };\n  };\n  const leerLienzos = () => {\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1);\n    dbPromise.onsuccess = () => {\n      const bd = dbPromise.result;\n      const lienzos = document.getElementById(\"lienzos\");\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readonly\");\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\");\n      const request = lienzoStore.openCursor();\n      const fragment = document.createDocumentFragment();\n      request.onsuccess = e => {\n        const cursor = e.target.result;\n        if (cursor) {\n          const img = document.createElement(\"img\");\n          const nombrePizarra = document.createElement(\"label\");\n          img.src = cursor.value.image;\n          img.id = \"lienzoGuardado\";\n          nombrePizarra.innerHTML = cursor.value.nombre;\n          const elementoLienzo = document.createElement(\"div\");\n          elementoLienzo.id = \"elementoLienzo\";\n          elementoLienzo.appendChild(nombrePizarra);\n          elementoLienzo.appendChild(img);\n          const divBotones = document.createElement(\"div\");\n          divBotones.id = \"botonesLienzoGuardado\";\n          const botonActualizar = document.createElement(\"button\");\n          botonActualizar.textContent = \"Cargar\";\n          botonActualizar.className = \"botonCRUD\";\n          botonActualizar.onclick = cargarLienzo;\n          botonActualizar.id = \"actualizarLienzo\";\n          botonActualizar.dataset.nombre = cursor.value.nombre;\n          divBotones.appendChild(botonActualizar);\n          const botonEliminar = document.createElement(\"button\");\n          botonEliminar.textContent = \"Eliminar\";\n          botonEliminar.className = \"botonCRUD\";\n          botonEliminar.onclick = eliminarLienzo;\n          botonEliminar.dataset.nombre = cursor.value.nombre;\n          divBotones.appendChild(botonEliminar);\n          elementoLienzo.appendChild(divBotones);\n          fragment.appendChild(elementoLienzo);\n          cursor.continue();\n        } else {\n          lienzos.textContent = \"\";\n          lienzos.appendChild(fragment);\n        }\n      };\n    };\n  };\n  const cargarLienzo = e => {\n    const key = e.target.dataset.nombre;\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1);\n    dbPromise.onsuccess = () => {\n      const bd = dbPromise.result;\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readonly\");\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\");\n      const request = lienzoStore.get(key);\n      request.onsuccess = () => {\n        const canvas = document.getElementById('pizarra');\n        const context = canvas.getContext(\"2d\");\n        const imagen = new Image();\n        imagen.onload = () => {\n          context.clearRect(0, 0, canvas.width, canvas.height);\n          context.drawImage(imagen, 0, 0);\n        };\n        imagen.src = request.result.image;\n        document.getElementById(\"ingresoNombreLienzo\").value = request.result.nombre;\n        cambiar_lapiz();\n      };\n    };\n  };\n  const eliminarLienzo = e => {\n    const key = e.target.dataset.nombre;\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1);\n    dbPromise.onsuccess = () => {\n      const bd = dbPromise.result;\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\");\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\");\n      const request = lienzoStore.delete(key);\n      request.onsuccess = () => {\n        leerLienzos();\n        alert(`El lienzo ${key} se eliminará`);\n      };\n    };\n  };\n  const limpiar_pizarra = () => {\n    const canvas = document.getElementById('pizarra');\n    const context = canvas.getContext(\"2d\");\n    context.fillStyle = \"white\";\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    document.getElementById(\"resize\").style.display = \"none\";\n  };\n  socket.on('subirImagen', subirImagen);\n  const subir_imagen = () => {\n    let img = document.createElement('img');\n    const file = document.querySelector('#inp').files[0];\n    canvas = document.getElementById('pizarra');\n    context = canvas.getContext('2d');\n    let actuImg;\n    actuImg = canvas.toDataURL();\n    setnewImg(actuImg);\n    const src = URL.createObjectURL(file);\n    socketSubirImagen(src, newWidth, newHeight, context);\n    img.id = 'imgSub';\n    setWidth(200);\n    setHeight(200);\n    img.onload = () => {\n      document.getElementById(\"resize\").style.display = \"block\";\n      setImg(img);\n    };\n    setFigura('img');\n    socket.emit('subirImagen', {\n      img,\n      newWidth,\n      newHeight\n    });\n    document.querySelector('#inp').addEventListener('onchange', function (e) {\n      e.currentTarget.files = null;\n    });\n  };\n  const socketSubirImagen = (img, newWidth, newHeight) => {\n    console.log(img);\n    canvas = document.getElementById('pizarra');\n    context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0, newWidth, newHeight);\n  };\n  function subirImagen(data) {\n    console.log(data.img);\n    socketSubirImagen(data.img, data.newWidth, data.newHeight);\n  }\n  const downloadImg = () => {\n    let enlace = document.createElement('a');\n    enlace.download = \"lienzo.png\";\n    const canvas = document.getElementById('pizarra');\n    enlace.href = canvas.toDataURL();\n    enlace.click();\n  };\n  const resizeImg = () => {\n    let img = document.createElement('img');\n    const file = document.querySelector('input[type=file]').files[0];\n    const canvas = document.getElementById('pizarra');\n    const context = canvas.getContext('2d');\n    let actuImg;\n    img.src = URL.createObjectURL(file);\n    img.id = 'imgSub';\n    const widthImg = document.getElementById('w').value;\n    const heightImg = document.getElementById('h').value;\n    setWidth(widthImg);\n    setHeight(heightImg);\n    img.onload = () => {\n      context.putImageData(newImg, 0, 0);\n      context.drawImage(img, 0, 0, widthImg, heightImg);\n    };\n    console.log(img);\n    setFigura('img');\n    setImg(img);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"principal\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w3-col guardado\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Barra_CRUD, {\n          funcionGuardarLienzo: guardarLienzo,\n          funcionCargarLienzo: cargarLienzo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"contenedorLienzos\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"lienzos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w3-col pizarra\",\n      children: /*#__PURE__*/_jsxDEV(DrawingCanvas, {\n        color: colorAct,\n        grosor: grosorAct,\n        figura: figura,\n        img: img,\n        newImg: newImg,\n        newWidth: newWidth,\n        newHeight: newHeight,\n        socket: socket\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w3-col tools\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w3-col\",\n        children: /*#__PURE__*/_jsxDEV(Barra_Herramientas, {\n          funcionPincel: cambiar_lapiz,\n          funcionBorrador: cambiar_borrador\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w3-col\",\n        children: /*#__PURE__*/_jsxDEV(Barra_Colores, {\n          funcionColor: cambiar_color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w3-col\",\n        children: /*#__PURE__*/_jsxDEV(Barra_Grosor, {\n          funcionGrosor: cambiar_grosor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w3-col\",\n        children: /*#__PURE__*/_jsxDEV(Barra_Figuras, {\n          funcionFiguraCuadrado: dibujarCuadrado,\n          funcionFiguraTriangulo: dibujarTriangulo,\n          funcionFiguraCirculo: dibujarCirculo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w3-col\",\n        children: /*#__PURE__*/_jsxDEV(Barra_Funciones, {\n          funcionLimpiar: limpiar_pizarra,\n          funcionFiguraImagen: subir_imagen,\n          funciontamanoImagen: resizeImg,\n          funciondescargaImagen: downloadImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 10\n  }, this);\n}\n_s(App, \"ivCqcCSmirVcWg1l4SpnzRRnmP8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","DrawingCanvas","subir_imagen","obtenerId","Barra_Herramientas","Barra_Colores","Barra_Grosor","Barra_Funciones","Barra_Figuras","useEffect","Barra_CRUD","indexedDB","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","crearBaseDeDatos","console","log","request","open","onsuccess","bd","result","onupgradeneeded","createObjectStore","keyPath","onerror","e","App","props","leerLienzos","socket","figura","setFigura","colorAct","setColor","grosorAct","setGrosor","img","setImg","newImg","setnewImg","newWidth","setWidth","newHeight","setHeight","idImg","canvas","context","cambiar_color","element","target","value","cambiar_grosor","cambiar_lapiz","document","getElementById","style","display","cambiar_borrador","dibujarCuadrado","dibujarTriangulo","dibujarCirculo","guardarLienzo","dbPromise","ingresoTexto","transaction","lienzoStore","objectStore","image","toDataURL","nombre","transactionRead","lienzoRead","requestRead","get","newtransaction","newlienzoStore","requestAdd","put","alert","add","lienzos","openCursor","fragment","createDocumentFragment","cursor","createElement","nombrePizarra","src","id","innerHTML","elementoLienzo","appendChild","divBotones","botonActualizar","textContent","className","onclick","cargarLienzo","dataset","botonEliminar","eliminarLienzo","continue","key","getContext","imagen","Image","onload","clearRect","width","height","drawImage","delete","limpiar_pizarra","fillStyle","on","subirImagen","file","querySelector","files","actuImg","URL","createObjectURL","socketSubirImagen","emit","addEventListener","currentTarget","data","downloadImg","enlace","download","href","click","resizeImg","widthImg","heightImg","putImageData"],"sources":["D:/Web/pizarrareact2.0/client/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport DrawingCanvas, { subir_imagen } from \"./DrawingCanvas\";\r\nimport { obtenerId } from \"./DrawingCanvas\";\r\nimport Barra_Herramientas from \"./Barra_Herramientas\";\r\nimport Barra_Colores from \"./Barra_Colores\"\r\nimport Barra_Grosor from \"./Barra_Grosor\";\r\nimport Barra_Funciones from \"./Barra_Funciones\";\r\nimport \"./styles.css\"\r\nimport \"./w3.css\"\r\nimport Barra_Figuras from \"./Barra_Figuras\";\r\nimport { useEffect } from \"react\";\r\nimport Barra_CRUD from \"./Barra_CRUD\";\r\n\r\nconst indexedDB =\r\n  window.indexedDB ||\r\n  window.mozIndexedDB ||\r\n  window.webkitIndexedDB ||\r\n  window.msIndexedDB ||\r\n  window.shimIndexedDB;\r\n\r\nconst crearBaseDeDatos = () => {\r\n  if (!indexedDB) {\r\n    console.log(\"IndexedDB no soportado\")\r\n    return\r\n  }\r\n  const request = indexedDB.open(\"Pizarra-DB\", 1)\r\n  request.onsuccess = () => {\r\n    const bd = request.result\r\n  }\r\n\r\n  request.onupgradeneeded = () => {\r\n    const bd = request.result\r\n    bd.createObjectStore(\"lienzosGuardados\", { keyPath: \"nombre\" })\r\n  }\r\n  request.onerror = (e) => {\r\n    console.log(\"Error\", e)\r\n    console.log(\"An error occurred with IndexedDB\")\r\n  }\r\n}\r\n\r\nfunction App(props) {\r\n  useEffect(() => {\r\n    crearBaseDeDatos()\r\n    leerLienzos()\r\n  }, [])\r\n  const socket = props.socket\r\n  const [figura, setFigura] = useState(\"linea\")\r\n  const [colorAct, setColor] = useState(\"black\")\r\n  const [grosorAct, setGrosor] = useState(3)\r\n  const [img, setImg] = useState(null)\r\n  const [newImg, setnewImg] = useState(null)\r\n  const [newWidth, setWidth] = useState(200)\r\n  const [newHeight, setHeight] = useState(200)\r\n\r\n  let idImg\r\n  let canvas\r\n  let context\r\n\r\n  const cambiar_color = (element) => {\r\n    setColor(element.target.value)\r\n  }\r\n\r\n\r\n  const cambiar_grosor = (element) => {\r\n    setGrosor(element.target.value)\r\n  }\r\n\r\n  const cambiar_lapiz = () => {\r\n    setFigura(\"linea\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const cambiar_borrador = () => {\r\n    setFigura(\"linea\")\r\n    setColor(\"#ffffff\")\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const dibujarCuadrado = () => {\r\n    setFigura(\"cuadrado\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n\r\n  const dibujarTriangulo = () => {\r\n    setFigura(\"triangulo\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n\r\n  const dibujarCirculo = () => {\r\n    setFigura(\"circulo\")\r\n    if (colorAct === \"#ffffff\") {\r\n      setColor(\"black\")\r\n\r\n    }\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  const guardarLienzo = () => {\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      let ingresoTexto = document.getElementById(\"ingresoNombreLienzo\")\r\n      if (ingresoTexto.value) {\r\n        const transaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\")\r\n        const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n        const canvas = document.getElementById('pizarra')\r\n        var image = canvas.toDataURL();\r\n        var nombre = ingresoTexto.value\r\n\r\n        const transactionRead = bd.transaction([\"lienzosGuardados\"], \"readonly\")\r\n        const lienzoRead = transactionRead.objectStore(\"lienzosGuardados\")\r\n        const requestRead = lienzoRead.get(nombre)\r\n        requestRead.onsuccess = () => {\r\n          const newtransaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\")\r\n          const newlienzoStore = newtransaction.objectStore(\"lienzosGuardados\")\r\n          if (requestRead.result) {\r\n            const requestAdd = newlienzoStore.put({\r\n              nombre,\r\n              image\r\n            })\r\n            alert(`Lienzo ${nombre} actualizado`)\r\n            ingresoTexto.value = \"\"\r\n          } else {\r\n            const requestAdd = newlienzoStore.add({\r\n              nombre,\r\n              image\r\n            })\r\n            alert(`Lienzo guardado con el nombre ${ingresoTexto.value}`)\r\n            ingresoTexto.value = \"\"\r\n          }\r\n          leerLienzos()\r\n        }\r\n\r\n      } else {\r\n        alert(\"Ingrese un nombre al lienzo porfavor\")\r\n      }\r\n    }\r\n  }\r\n\r\n  const leerLienzos = () => {\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      const lienzos = document.getElementById(\"lienzos\")\r\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readonly\")\r\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n      const request = lienzoStore.openCursor()\r\n      const fragment = document.createDocumentFragment()\r\n\r\n      request.onsuccess = (e) => {\r\n        const cursor = e.target.result\r\n        if (cursor) {\r\n          const img = document.createElement(\"img\")\r\n          const nombrePizarra = document.createElement(\"label\")\r\n          img.src = cursor.value.image\r\n          img.id = \"lienzoGuardado\"\r\n          nombrePizarra.innerHTML = cursor.value.nombre\r\n          const elementoLienzo = document.createElement(\"div\")\r\n          elementoLienzo.id = \"elementoLienzo\"\r\n          elementoLienzo.appendChild(nombrePizarra)\r\n          elementoLienzo.appendChild(img)\r\n          const divBotones = document.createElement(\"div\")\r\n          divBotones.id = \"botonesLienzoGuardado\"\r\n          const botonActualizar = document.createElement(\"button\")\r\n          botonActualizar.textContent = \"Cargar\"\r\n          botonActualizar.className = \"botonCRUD\"\r\n          botonActualizar.onclick = cargarLienzo\r\n          botonActualizar.id = \"actualizarLienzo\"\r\n          botonActualizar.dataset.nombre = cursor.value.nombre\r\n          divBotones.appendChild(botonActualizar)\r\n          const botonEliminar = document.createElement(\"button\")\r\n          botonEliminar.textContent = \"Eliminar\"\r\n          botonEliminar.className = \"botonCRUD\"\r\n          botonEliminar.onclick = eliminarLienzo\r\n          botonEliminar.dataset.nombre = cursor.value.nombre\r\n          divBotones.appendChild(botonEliminar)\r\n          elementoLienzo.appendChild(divBotones)\r\n          fragment.appendChild(elementoLienzo)\r\n          cursor.continue()\r\n        } else {\r\n          lienzos.textContent = \"\"\r\n          lienzos.appendChild(fragment)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const cargarLienzo = (e) => {\r\n    const key = e.target.dataset.nombre\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readonly\")\r\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n      const request = lienzoStore.get(key)\r\n      request.onsuccess = () => {\r\n        const canvas = document.getElementById('pizarra')\r\n        const context = canvas.getContext(\"2d\")\r\n        const imagen = new Image\r\n        imagen.onload = () => {\r\n          context.clearRect(0, 0, canvas.width, canvas.height);\r\n          context.drawImage(imagen, 0, 0)\r\n        }\r\n        imagen.src = request.result.image\r\n        document.getElementById(\"ingresoNombreLienzo\").value = request.result.nombre\r\n        cambiar_lapiz()\r\n      }\r\n    }\r\n  }\r\n\r\n  const eliminarLienzo = (e) => {\r\n    const key = e.target.dataset.nombre\r\n    const dbPromise = indexedDB.open(\"Pizarra-DB\", 1)\r\n    dbPromise.onsuccess = () => {\r\n      const bd = dbPromise.result\r\n      const transaction = bd.transaction([\"lienzosGuardados\"], \"readwrite\")\r\n      const lienzoStore = transaction.objectStore(\"lienzosGuardados\")\r\n      const request = lienzoStore.delete(key)\r\n      request.onsuccess = () => {\r\n        leerLienzos()\r\n        alert(`El lienzo ${key} se eliminará`)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  const limpiar_pizarra = () => {\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext(\"2d\");\r\n    context.fillStyle = \"white\";\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    document.getElementById(\"resize\").style.display = \"none\";\r\n  }\r\n\r\n  socket.on('subirImagen', subirImagen)\r\n\r\n  const subir_imagen = () => {\r\n    let img = document.createElement('img')\r\n    const file = document.querySelector('#inp').files[0]\r\n    canvas = document.getElementById('pizarra')\r\n    context = canvas.getContext('2d')\r\n    let actuImg\r\n    actuImg = canvas.toDataURL()\r\n    setnewImg(actuImg)\r\n    const src = URL.createObjectURL(file)\r\n    socketSubirImagen(src, newWidth, newHeight, context)\r\n    \r\n    img.id = 'imgSub'\r\n    setWidth(200)\r\n    setHeight(200)\r\n    img.onload = () => {\r\n      \r\n      document.getElementById(\"resize\").style.display = \"block\";\r\n      setImg(img)\r\n    }\r\n    setFigura('img')\r\n    socket.emit('subirImagen', {\r\n      img,\r\n      newWidth,\r\n      newHeight\r\n    })\r\n    document.querySelector('#inp').addEventListener('onchange', function (e) {\r\n      e.currentTarget.files = null;\r\n    })\r\n  }\r\n\r\n  const socketSubirImagen = (img, newWidth, newHeight) => {\r\n    console.log(img)\r\n    canvas = document.getElementById('pizarra')\r\n    context = canvas.getContext('2d')\r\n    context.drawImage(img, 0, 0, newWidth, newHeight)\r\n  }\r\n\r\n  function subirImagen(data) {\r\n    console.log(data.img)\r\n    socketSubirImagen(data.img, data.newWidth, data.newHeight)\r\n  }\r\n\r\n  const downloadImg = () => {\r\n    let enlace = document.createElement('a')\r\n    enlace.download = \"lienzo.png\"\r\n    const canvas = document.getElementById('pizarra')\r\n\r\n    enlace.href = canvas.toDataURL();\r\n\r\n    enlace.click();\r\n  }\r\n  const resizeImg = () => {\r\n\r\n    let img = document.createElement('img')\r\n    const file = document.querySelector('input[type=file]').files[0]\r\n    const canvas = document.getElementById('pizarra')\r\n    const context = canvas.getContext('2d')\r\n    let actuImg\r\n    img.src = URL.createObjectURL(file)\r\n    img.id = 'imgSub'\r\n\r\n    const widthImg = document.getElementById('w').value\r\n    const heightImg = document.getElementById('h').value\r\n    setWidth(widthImg)\r\n    setHeight(heightImg)\r\n    img.onload = () => {\r\n      context.putImageData(newImg, 0, 0)\r\n      context.drawImage(img, 0, 0, widthImg, heightImg)\r\n    }\r\n    console.log(img)\r\n\r\n\r\n    setFigura('img')\r\n\r\n    setImg(img)\r\n  }\r\n\r\n  return <div className=\"principal\">\r\n    <div className=\"w3-col guardado\">\r\n      <div>\r\n        <Barra_CRUD funcionGuardarLienzo={guardarLienzo} funcionCargarLienzo={cargarLienzo} />\r\n      </div>\r\n      <div id=\"contenedorLienzos\">\r\n        <div id=\"lienzos\"></div>\r\n      </div>\r\n    </div>\r\n    <div className=\"w3-col pizarra\">\r\n      <DrawingCanvas\r\n        color={colorAct}\r\n        grosor={grosorAct}\r\n        figura={figura}\r\n        img={img}\r\n        newImg={newImg}\r\n        newWidth={newWidth}\r\n        newHeight={newHeight}\r\n        socket={socket}\r\n      ></DrawingCanvas>\r\n    </div>\r\n    <div className=\"w3-col tools\">\r\n      <div className=\"w3-col\">\r\n        <Barra_Herramientas funcionPincel={cambiar_lapiz} funcionBorrador={cambiar_borrador} />\r\n      </div>\r\n      <div className=\"w3-col\">\r\n        <Barra_Colores funcionColor={cambiar_color} />\r\n      </div>\r\n      <div className=\"w3-col\">\r\n        <Barra_Grosor funcionGrosor={cambiar_grosor} />\r\n      </div>\r\n      <div className=\"w3-col\">\r\n        <Barra_Figuras funcionFiguraCuadrado={dibujarCuadrado} funcionFiguraTriangulo={dibujarTriangulo} funcionFiguraCirculo={dibujarCirculo} />\r\n      </div>\r\n      <div className=\"w3-col\">\r\n        <Barra_Funciones funcionLimpiar={limpiar_pizarra} funcionFiguraImagen={subir_imagen} funciontamanoImagen={resizeImg} funciondescargaImagen={downloadImg} />\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n\r\n\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}